<html lang="en" >
<head>
    <!-- Angular Material style sheet -->
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/angular_material/1.0.0/angular-material.min.css">
</head>
<body ng-app="protoBuild" ng-cloak>

<div ng-controller="propertyFormCtl as ctl">
    <form>
        <md-content layout-padding>
            <div>
                <md-input-container class="md-block" flex-gt-xl>
                    <label>Address</label>
                    <input ng-model="ctl.myForm.address">
                </md-input-container>
                <md-input-container class="md-block" flex-gt-xl>
                    <label>URL</label>
                    <input ng-model="ctl.myForm.url">
                </md-input-container>
                <div layout-gt-xs="row">
                    <md-input-container class="md-block">
                        <label>Price From</label>
                        <input ng-model="ctl.myForm.priceFrom" type="number">
                    </md-input-container>
                    <md-input-container class="md-block">
                        <label>Price To</label>
                        <input ng-model="ctl.myForm.priceTo" type="number">
                    </md-input-container>
                    <md-input-container class="md-block">
                        <label>Property Type</label>
                        <md-select  ng-model="ctl.myForm.propertyType">
                            <md-option ng-repeat="type in ctl.propertyTypes" value="{{type.id}}">{{type.name}}</md-option>
                        </md-select>
                    </md-input-container>
                </div>
            </div>

            <md-button ng-click="ctl.toggleShowAllRoomTypes()" >{{ctl.showAllButtonName()}}</md-button>

            <div ng-repeat="roomType in ctl.roomTypes | orderBy: 'name'" ng-show="ctl.showRoomType(roomType.id)">
                <md-toolbar class="md-theme-light">
                    <h2 class="md-toolbar-tools">
                        <span>{{roomType.name}}<md-button ng-click="ctl.addRoom(roomType.id)">Add</md-button></span>
                    </h2>
                </md-toolbar>
                <md-content>
                    <md-list>
                        <md-list-item ng-repeat="room in ctl.myForm.rooms | filter: {type : roomType.id} : true">
                            <ng-form name="roomForm">
                                <div layout-gt-xs="row">
                                    <md-input-container class="md-block" flex-gt-xl>
                                        <label>Room Name</label>
                                        <input ng-model="room.name">
                                    </md-input-container>
                                    <md-input-container class="md-block" flex-gt-xl>
                                        <label>Width</label>
                                        <input ng-model="room.width" type="number">
                                    </md-input-container>
                                    <md-input-container class="md-block" flex-gt-xl>
                                        <label>Length</label>
                                        <input ng-model="room.length" type="number">
                                    </md-input-container>
                                    <md-input-container class="md-block" flex-gt-xl>
                                        <label>Height</label>
                                        <input ng-model="room.height" type="number">
                                    </md-input-container>
                                    <md-button class="md-secondary" ng-click="ctl.removeRoom(room.id)">Remove</md-button>
                                </div>
                            </ng-form>
                        </md-list-item>
                    </md-list>
                </md-content>
            </div>
        </md-content>

        <md-button ng-click="ctl.toggleShowAllRoomTypes()" >{{ctl.showAllButtonName()}}</md-button>

    </form>
    {{ctl.myForm | json}}

    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.3.0/lodash.js"></script>
    <!-- Angular Material requires Angular.js Libraries -->
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-animate.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-aria.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-messages.min.js"></script>
    <!-- Angular Material Library -->
    <script src="http://ajax.googleapis.com/ajax/libs/angular_material/1.0.5/angular-material.min.js"></script>
    <!-- Your application bootstrap  -->
    <script src="/protoBuild/propertyForm.js"></script>
</div>
</body>
</html>